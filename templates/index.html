<html>
    <head>
        <script src="https://unpkg.com/vue@~2.4/dist/vue.min.js"></script>
        <script src="https://unpkg.com/jquery/dist/jquery.min.js"></script>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, Helvetica, sans-serif;
                background-image: url(/static/img/background.jpg);
                background-size: cover;

                -webkit-user-select: none;
                        user-select: none;
            }

            /* * {
                box-shadow: 0 0 1px #f0f;
            } */
            .sensors {
                width: 560px;
                margin: 0 auto;
                position: relative;
                box-sizing: border-box;
            }

            .sensor {
                width: 128px;
                height: 128px;
                float: left;
                margin: 6px;
                background-color: rgba(224, 224, 224, 0.75);
                border-radius: 13px;
                position: relative;
                -webkit-backdrop-filter: blur(16px);
            }

            .sensor:hover {
                background-color: rgba(255, 255, 255, 0.9);
                -webkit-backdrop-filter: blur(24px);
            }

            .sensor__name {
                opacity: 0.35;
                position: absolute;
                color: black;
                top: 50%;
                left: 12px
            }

            .sensor__value {
                opacity: 0.35;
                background-color: black;
                color: white;
                font-size: 14px;
                line-height: 32px;
                text-align: center;
                display: inline-block;
                border-radius: 16px;
                height: 32px;
                width: 32px;
                padding: 0;
                margin: 0;
                position: absolute;
                top: 12px;
                left: 12px;
            }
        </style>
    </head>
    <body>
        <div id="app">
            <div class="sensors">
                <sensor
                    v-for="sensor in sensors"
                    :name="sensor.name"
                    :type="sensor.type"
                    :value="sensor.value"
                    :key="sensor.topic"
                ></sensor>
            </div>
        </div>

        <script>
            Vue.component('sensor', {
                props: ['name', 'type', 'value'],
                template: '<div class="sensor"><span class="sensor__name">{{ name }}</span><span class="sensor__value" :title="value">{{ Math.round(parseFloat(value)) }}&deg;</span></div>'
            })

            var app = new Vue({
                el: '#app',
                data: {
                    sensors: []
                }
            })

            $(function() {
                setInterval(function() {
                    $.getJSON("/sensors.json").then(function(data) {
                        app.sensors = data
                    })
                }, 1000)
            })
        </script>
    </body>
</html>
